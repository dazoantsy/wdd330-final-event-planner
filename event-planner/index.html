<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <title>My events â€” Event Planner</title>
    <meta name="viewport" content="width=device-width,initial-scale=1, viewport-fit=cover" />
    <link rel="stylesheet" href="../css/style.css" />
</head>

<body>
    <a href="#main" class="sr-only">Skip to main content</a>

    <script>
        // Early auth guard
        (function () {
            try {
                var now = Math.floor(Date.now() / 1000);
                for (var i = 0; i < localStorage.length; i++) {
                    var k = localStorage.key(i);
                    if (!/^sb-.*-auth-token$/.test(k)) continue;
                    var raw = localStorage.getItem(k); if (!raw) continue;
                    var s = JSON.parse(raw);
                    var ss = s.currentSession || s.session || s;
                    var exp = typeof ss?.expires_at === "number" ? ss.expires_at : 0;
                    if (exp > now) return;
                }
            } catch { }
            location.replace("../index.html");
        }());
    </script>

    <div id="__header"></div>

    <main id="main" class="container" role="main" aria-labelledby="page-title">

        <h1>My Events</h1>
        <div id="invites-banner" class="notice hidden" role="status" aria-live="polite"></div>

        <ul id="events-list" class="list"></ul>
    </main>

    <div id="__footer"></div>

    <script type="module">
        import { loadPartials } from "../js/load-partials.js";
        await loadPartials();
        await import("../js/auth.js");
        await import("../js/header-logo.js");
        await import("../js/events-list.js");
    </script>
</body>

</html>